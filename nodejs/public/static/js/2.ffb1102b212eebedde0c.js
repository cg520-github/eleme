webpackJsonp([2],{"W/Au":function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=n("l/JR"),e={name:"Zz",data:function(){return{specifications:0}},methods:{sure:function(){this.$emit("fn",{mian:this.foods,content:{price:this.foods.price,specifications:this.specifications},target:this.foods.tagert})},del:function(){this.$emit("del")},sel1:function(t){this.specifications=t.id}},props:{foods:{type:Object,default:{}}}},i={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"bg"},[n("div",{staticClass:"guige"},[n("h2",[t._v(t._s(t.foods.name)),n("span",{staticStyle:{float:"right","padding-right":"0.4rem"},on:{touchstart:t.del}},[t._v("X")])]),t._v(" "),n("p",[t._v("\n\t           "+t._s(t.foods.specifications)+"\n\t       ")]),t._v(" "),n("div",{staticClass:"guige_btn"},t._l(t.foods.values,function(s){return n("button",{staticClass:"btn_active",on:{touchstart:function(n){return t.sel1(s)}}},[t._v("默认")])}),0),t._v(" "),n("div",{staticClass:"add_btn"},[n("span",[t._v("\n\t               ￥"+t._s(t.foods.price)+"\n\t           ")]),t._v(" "),n("button",{on:{touchstart:t.sure}},[t._v("\n\t               加入购物车\n\t           ")])])])])},staticRenderFns:[]};var o={name:"Shops",components:{zz:n("VU/8")(e,i,!1,function(t){n("pnW4")},null,null).exports},data:function(){return{shopInfo:{name:"",address:"",id:null,phone:"",category:"",supports:[{description:"",icon_color:"",icon_name:"",id:null,name:""}],recent_order_num:null,rating_count:null,rating:null,promotion_info:"",piecewise_agent_fee:{tips:""},opening_hours:[""],is_new:!0,is_premium:!0,image_path:"",float_minimum_order_amount:null,float_delivery_fee:null,distance:"",order_lead_time:"",delivery_mode:{color:"",id:null,text:""}},index:0,menu:[],nowIndex:0,num:0,onoff:!1,foods:{},imgSel:"./static/img/car1.png",score:{},service_score:0,food_score:0,RatingsTags:[],nowTagsIndex:0,pages:1,up:0,onoffData:!0,tag_name:"全部",ugcRatingsData:[],notag:["不满意","差评"]}},methods:{back:function(){this.$router.back()},selIndex:function(t){this.index=t},selectAides:function(t,s){this.nowIndex=t,this.rightData=s;var n=this.$refs["index"+t][0].offsetTop;this.$refs.scroll.scrollTo(0,n)},move:function(t){var s=null;for(var n in this.$refs){var a=this.$refs[n][0];"scroll"!=n&&a.getBoundingClientRect().top>=0&&a.getBoundingClientRect().top<=this.$refs.scroll.offsetHeight-240&&(s=n.substring(5),this.nowIndex=s)}},addNum:function(t){t.onoff?t.num++:(this.onoff=!0,this.foods={name:t.name,specifications:t.specifications.name,values:t.specifications.values,price:t.price,tagert:t})},remNum:function(t){t.num--,0==t.num?t.onoff=!1:t.num<0&&(t.num=0)},sureGoods:function(t){t.target.onoff=!0,t.target.num=1,this.onoff=!1},fnDel:function(){this.onoff=!1},mai:function(){console.log("ok")},ratingsTags:function(t,s){var n=this;this.nowTagsIndex=s,this.tag_name=t.nameTag,a.a.getUgcRatings({restaurant_id:this.$route.params.id,tag_name:this.tag_name,offset:20*(this.pages-1)}).then(function(t){n.ugcRatingsData=t})},start:function(t){t=t.targetTouches[0],this.up=t.pageY},end:function(t){var s=this;(t=t.changedTouches[0]).pageY-this.up<0&&this.onoffData&&(this.onoffData=!1,this.pages++,setTimeout(function(){a.a.getUgcRatings({restaurant_id:s.$route.params.id,tag_name:s.tag_name,offset:20*(s.pages-1)}).then(function(t){s.ugcRatingsData=s.ugcRatingsData.concat(t),s.onoffData=!0})},1e3))}},created:function(){var t=this,s=this.$route.params.id;a.a.getShoppingRestaurant({restaurant_id:s}).then(function(s){t.shopInfo=s}),a.a.getMenu({restaurant_id:s}).then(function(s){s.forEach(function(t){t.foods.forEach(function(t){t.onoff=!1,t.num=0})}),t.menu=s}),a.a.getRatingsScores({restaurant_id:s}).then(function(s){t.score=s,t.service_score=parseFloat(parseFloat(t.score.service_score).toFixed(2)),t.food_score=parseFloat(parseFloat(t.score.food_score).toFixed(2))}),a.a.getRatingsTags({restaurant_id:s}).then(function(s){t.RatingsTags=s}),a.a.getUgcRatings({restaurant_id:s,tag_name:this.tag_name,offset:20*(this.pages-1)}).then(function(s){t.ugcRatingsData=s})},watch:{menu:{handler:function(){var t=!1;this.menu.forEach(function(s){s.foods.forEach(function(s){s.onoff&&(t=!0)})}),this.imgSel=t?"./static/img/car2.png":"./static/img/car1.png"},deep:!0}},computed:{allNum:function(){var t=0;return this.menu.forEach(function(s){s.foods.forEach(function(s){s.onoff&&t++})}),t},allPrice:function(){var t=0;return this.menu.forEach(function(s){s.foods.forEach(function(s){s.onoff&&(t+=s.price*s.num)})}),t},dis:function(){var t=0;return this.menu.forEach(function(s){s.foods.forEach(function(s){s.onoff&&(t+=s.price*s.num)})}),!(t-this.shopInfo.float_minimum_order_amount>=0)&&-(t-this.shopInfo.float_minimum_order_amount)}}},r={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shopGood"},[a("div",{staticClass:"mask",style:{backgroundColor:"#f60"}}),t._v(" "),a("div",{staticClass:"header"},[a("div",[a("span",{staticClass:"el-icon-arrow-left",on:{touchstart:t.back}}),t._v(" "),a("img",{attrs:{src:"",alt:""}})]),t._v(" "),a("div",[a("h4",[t._v(t._s(t.shopInfo.name))]),t._v(" "),a("p",[t._v(t._s(t.shopInfo.category))]),t._v(" "),a("p",[t._v("公告:"+t._s(t.shopInfo.promotion_info))])])]),t._v(" "),a("div",{staticClass:"info"},[a("ul",{staticClass:"list"},[a("li",{class:0==t.index?"active":"",on:{touchstart:function(s){return t.selIndex(0)}}},[a("span",[t._v("商品")])]),t._v(" "),a("li",{class:1==t.index?"active":"",on:{touchstart:function(s){return t.selIndex(1)}}},[a("span",[t._v("评价")])])]),t._v(" "),0==t.index?a("div",{staticClass:"good"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple-dark1"},[a("ul",t._l(t.menu,function(s,n){return a("li",{class:t.nowIndex==n?"active":"",on:{touchstart:function(a){return t.selectAides(n,s)}}},[t._v(t._s(s.name))])}),0)])]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{ref:"scroll",staticClass:"scroll",on:{touchmove:function(s){return t.move(s)}}},t._l(t.menu,function(s,e){return a("div",{ref:"index"+e,refInFor:!0,staticClass:"grid-content bg-purple-dark2"},t._l(s.foods,function(s){return a("div",{staticClass:"shoppingItem"},[a("div",{staticClass:"left"},[a("img",{staticClass:"shopping-img"}),t._v(" "),a("img",{staticClass:"new-products-img",attrs:{src:n("ggud")}})]),t._v(" "),a("div",{staticClass:"right"},[a("h3",[a("span",[t._v(t._s(s.name))]),t._v(" "),a("span",{style:{color:"#"+s.attributes.icon_color}},[t._v(t._s(s.attributes.icon_name))])]),t._v(" "),a("p",[t._v(t._s(s.description))]),t._v(" "),a("p",[a("span",[t._v("月售"+t._s(s.satisfy_count)+"份")]),t._v(" "),a("span",[t._v("好评率"+t._s(100*s.satisfy_rate)+"%")])]),t._v(" "),a("p",[a("span",{staticClass:"unit-price"},[a("i",[t._v("￥")]),t._v(t._s(s.price))]),t._v(" "),a("span",{staticClass:"add-shopping",on:{touchstart:function(n){return t.addNum(s)}}},[t._v("+")]),t._v(" "),s.onoff?a("span",{staticClass:"shopping-num"},[t._v(t._s(s.num))]):t._e(),t._v(" "),s.onoff?a("span",{staticClass:"del-shopping",on:{touchstart:function(n){return t.remNum(s)}}},[t._v("-")]):t._e()])])])}),0)}),0)])],1)],1):a("div",{staticClass:"evaluate"},[a("div",{staticClass:"comprehensive-score"},[a("div",{staticClass:"left"},[a("p",[t._v(t._s(t.score.overall_score))]),t._v(" "),a("p",[t._v("综合评价")]),t._v(" "),a("p",[t._v("高于周边商家"+t._s(100*t.score.compare_rating)+"%")])]),t._v(" "),a("div",{staticClass:"right"},[a("div",[a("span",{staticClass:"title"},[t._v("服务态度")]),t._v(" "),a("el-rate",{attrs:{id:"pf",disabled:"","show-score":"","text-color":"#ff9900"},model:{value:t.service_score,callback:function(s){t.service_score=s},expression:"service_score"}})],1),t._v(" "),a("div",[a("span",{staticClass:"title"},[t._v("菜品评价")]),t._v(" "),a("el-rate",{attrs:{id:"pf",disabled:"","show-score":"","text-color":"#ff9900"},model:{value:t.food_score,callback:function(s){t.food_score=s},expression:"food_score"}})],1),t._v(" "),a("div",[a("span",{staticClass:"title"},[t._v("送达时间")]),t._v(" "),a("span",{staticClass:"service-time"},[t._v(t._s(t.score.deliver_time)+"分钟")])])])]),t._v(" "),a("div",{staticClass:"user-rating"},[a("ul",{staticClass:"label"},t._l(t.RatingsTags,function(s,n){return a("li",{class:{nolabel:-1!=t.notag.indexOf(s.nameTag),active:t.nowTagsIndex==n},on:{touchstart:function(a){return t.ratingsTags(s,n)}}},[t._v(t._s(s.nameTag)+t._s(s.count))])}),0),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:!t.onoffData,expression:"!onoffData",modifiers:{fullscreen:!0}}],staticClass:"content",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading"}},[t._l(t.ugcRatingsData,function(s){return a("div",{staticClass:"appraise"},[a("div",{staticClass:"appraise_box"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:s.avatar,alt:""}})]),t._v(" "),a("div",{staticClass:"right"},[a("h5",[t._v(t._s(s.username)+" "),a("span",[t._v(t._s(s.rated_at))])]),t._v(" "),a("p",[a("el-rate",{attrs:{id:"pf"},model:{value:s.rating_star,callback:function(n){t.$set(s,"rating_star",n)},expression:"item.rating_star"}}),t._v(" "),a("span",[t._v(t._s(s.rating_text))])],1),t._v(" "),a("div",{staticClass:"img_dra"},t._l(s.item_ratings,function(t){return a("img",{attrs:{src:t.image_hash,alt:""}})}),0),t._v(" "),a("div",{staticClass:"com_label"},t._l(s.item_ratings,function(s){return a("span",[t._v(t._s(s.name))])}),0)])])])}),t._v(" "),a("div",{staticStyle:{height:"2rem","line-height":"2rem","text-align":"center"},on:{touchstart:t.start,touchend:t.end}},[t._v("\n\t\t\t\t\t\t上拉刷新数据\n\t\t\t\t\t")])],2)])])]),t._v(" "),t.onoff?a("zz",{attrs:{foods:t.foods},on:{fn:t.sureGoods,del:t.fnDel}}):t._e(),t._v(" "),0==this.index?a("div",{staticClass:"bot"},[a("img",{attrs:{src:t.imgSel}}),t._v(" "),t.allNum?a("i",[t._v(t._s(t.allNum))]):t._e(),t._v(" "),a("div",[a("span",[t._v("￥"+t._s(t.allPrice))]),t._v(" "),a("span",[t._v(t._s(t.shopInfo.piecewise_agent_fee.tips))])]),t._v(" "),t.dis?a("span",[t._v("还差￥"+t._s(t.dis)+"元起送")]):a("span",{staticClass:"js",on:{touchstart:t.mai}},[t._v("去结算")])]):t._e()],1)},staticRenderFns:[]};var c=n("VU/8")(o,r,!1,function(t){n("jwWw")},null,null);s.default=c.exports},ggud:function(t,s){t.exports="data:image/png;base64,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"},jwWw:function(t,s){},pnW4:function(t,s){}});
//# sourceMappingURL=2.ffb1102b212eebedde0c.js.map