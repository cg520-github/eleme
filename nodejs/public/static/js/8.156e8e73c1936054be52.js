webpackJsonp([8],{IEnx:function(t,s){},wFkw:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("XDqQ");var n=e("Axha"),i=e.n(n),o=e("7QTg"),a=e("l/JR"),r={name:"TakeOutFood",components:{BottomNav:e("cBse").a,Header:i.a,swiper:o.swiper,swiperSlide:o.swiperSlide},data:function(){return{isLogin:!1,address:"",navList:[],swiperOption:{pagination:{el:".swiper-pagination"}},pages:1,shopsList:[],up:0,onoffData:!0}},methods:{Jump:function(){this.$router.push("/personal-center")},trunBusiness:function(t){this.$router.push({path:"/business",query:{id:t.id,title:t.title}})},turnSearch:function(){this.$router.push("/search")},turnPosition:function(){this.$router.push("/positioning")},start:function(t){t=t.targetTouches[0],this.up=t.pageY},end:function(t){var s=this;(t=t.changedTouches[0]).pageY-this.up<0&&this.onoffData&&(this.onoffData=!1,this.pages++,setTimeout(function(){a.a.getShopping({latitude:s.$store.state.locationInfo.latitude,longitude:s.$store.state.locationInfo.longitude,offset:20*(s.pages-1)}).then(function(t){s.shopsList=s.shopsList.concat(t),s.onoffData=!0})},1e3))},trunShops:function(t){this.$router.push("/info-shop?id="+t.id)}},created:function(){var t=this,s=this.$store.state.locationInfo;if(s.name)this.address=s.name;else{var e=this;(new BMap.Geolocation).getCurrentPosition(function(t){(new BMap.Geocoder).getLocation(t.point,function(t){e.address=t.addressComponents.city,e.$store.commit("changeLocationInfo",t)})})}a.a.index_entry().then(function(s){for(var e=Math.ceil(s.length/8),n=0;n<e;n++)t.navList[n]=[];s.forEach(function(s,e){var n=Math.floor(e/8);t.navList[n].push(s)})}),a.a.getShopping({latitude:this.$store.state.locationInfo.latitude,longitude:this.$store.state.locationInfo.longitude,offset:20*(this.pages-1)}).then(function(s){t.shopsList=s})},computed:{}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"index"},[e("div",{staticClass:"position",on:{touchstart:t.turnPosition}}),t._v(" "),e("Header",{attrs:{fixed:"",title:t.address}},[e("span",{staticClass:"el-icon-search",attrs:{slot:"left"},on:{touchstart:t.turnSearch},slot:"left"}),t._v(" "),e("div",{attrs:{slot:"right"},on:{touchstart:t.Jump},slot:"right"},[t.isLogin?e("span",{staticClass:"el-icon-user",on:{touchstart:t.Jump}}):e("div",[t._v("登录/注册")])])]),t._v(" "),e("div",{staticClass:"banner"},[e("swiper",{attrs:{options:t.swiperOption}},[t._l(t.navList,function(s,n){return e("swiper-slide",{key:"pages"+n},t._l(s,function(s,n){return e("div",{key:"sp"+n},[e("img",{attrs:{src:s.image_url}}),t._v(" "),e("h3",{on:{touchstart:function(e){return t.trunBusiness(s)}}},[t._v(t._s(s.title))])])}),0)}),t._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),t._v(" "),e("div",{staticClass:"shops"},[t._m(0),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:!t.onoffData,expression:"!onoffData",modifiers:{fullscreen:!0}}],staticClass:"content",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.shopsList,function(s){return e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:s.image_path},on:{touchstart:function(e){return t.trunShops(s)}}})]),t._v(" "),e("div",{staticClass:"right"},[e("h4",[e("i",[t._v("品牌")]),t._v(" "),e("b",{on:{touchstart:function(e){return t.trunShops(s)}}},[t._v(t._s(s.name))]),t._v(" "),e("span",[t._v("票")]),t._v(" "),e("span",[t._v("准")]),t._v(" "),e("span",[t._v("保")])]),t._v(" "),e("p",[e("el-rate",{attrs:{id:"pf",disabled:""},model:{value:s.rating,callback:function(e){t.$set(s,"rating",e)},expression:"item.rating"}}),t._v("\n\t\t\t\t\t\t月售"+t._s(s.recent_order_num)+"单\n\t\t\t\t\t\t"),e("i",[t._v("准时达")]),t._v(" "),e("i",{style:{backgroundColor:"#"+s.delivery_mode.color,border:"1px solid #"+s.delivery_mode.color}},[t._v(t._s(s.delivery_mode.text))])],1),t._v(" "),e("p",[e("span",[t._v("￥"+t._s(s.float_minimum_order_amount)+"起送/"+t._s(s.piecewise_agent_fee.tips))]),t._v(" "),e("span",[t._v(t._s(s.distance)+"/"),e("b",[t._v(t._s(s.order_lead_time))])])])])])}),0),t._v(" "),e("div",{staticStyle:{height:"2rem","line-height":"2rem","text-align":"center"},on:{touchstart:t.start,touchend:t.end}},[t._v("\n\t\t\t上拉刷新数据\n\t\t")])]),t._v(" "),e("BottomNav")],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("h3",[s("span",{staticClass:"el-icon-s-shop"}),this._v("附近商家")])}]};var u=e("VU/8")(r,c,!1,function(t){e("IEnx")},null,null);s.default=u.exports}});
//# sourceMappingURL=8.156e8e73c1936054be52.js.map