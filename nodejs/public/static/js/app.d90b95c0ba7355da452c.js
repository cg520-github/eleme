webpackJsonp([10],{NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("7+uW"),i={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var a=e("VU/8")({name:"App"},i,!1,function(t){e("sAuz")},null,null).exports,s=e("/ocq"),r=e("7QTg"),u=e.n(r),c=e("l/JR"),l=e("cBse"),p=e("Au9i"),d=e.n(p),f={name:"TakeOutFood",components:{BottomNav:l.a,Header:p.Header,swiper:r.swiper,swiperSlide:r.swiperSlide,Loadmore:p.Loadmore},data:function(){return{isLogin:!1,address:"",navList:[],swiperOption:{pagination:{el:".swiper-pagination"}},pages:1,shopsList:[],up:0,onoffData:!0}},methods:{Jump:function(){this.$router.push("/personal-center")},trunBusiness:function(t){this.$router.push({path:"/business",query:{id:t.id,title:t.title}})},turnSearch:function(){this.$router.push("/search")},turnPosition:function(){this.$router.push("/positioning")},start:function(t){t=t.targetTouches[0],this.up=t.pageY},end:function(t){var n=this;(t=t.changedTouches[0]).pageY-this.up<0&&this.onoffData&&(this.onoffData=!1,this.pages++,setTimeout(function(){c.a.getShopping({latitude:n.$store.state.locationInfo.latitude,longitude:n.$store.state.locationInfo.longitude,offset:20*(n.pages-1)}).then(function(t){n.shopsList=n.shopsList.concat(t),n.onoffData=!0})},1e3))},trunShops:function(t){this.$router.push("/info-shop?id="+t.id)}},created:function(){var t=this,n=this.$store.state.locationInfo;if(n.name)this.address=n.name;else{var e=this;(new BMap.Geolocation).getCurrentPosition(function(t){(new BMap.Geocoder).getLocation(t.point,function(t){e.address=t.addressComponents.city,e.$store.commit("changeLocationInfo",t)})})}c.a.index_entry().then(function(n){for(var e=Math.ceil(n.length/8),o=0;o<e;o++)t.navList[o]=[];n.forEach(function(n,e){var o=Math.floor(e/8);t.navList[o].push(n)})}),c.a.getShopping({latitude:this.$store.state.locationInfo.latitude,longitude:this.$store.state.locationInfo.longitude,offset:20*(this.pages-1)}).then(function(n){t.shopsList=n})},computed:{}},v={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"index"},[e("div",{staticClass:"position",on:{touchstart:t.turnPosition}}),t._v(" "),e("Header",{attrs:{fixed:"",title:t.address}},[e("span",{staticClass:"el-icon-search",attrs:{slot:"left"},on:{touchstart:t.turnSearch},slot:"left"}),t._v(" "),e("div",{attrs:{slot:"right"},on:{touchstart:t.Jump},slot:"right"},[t.isLogin?e("span",{staticClass:"el-icon-user",on:{touchstart:t.Jump}}):e("div",[t._v("登录/注册")])])]),t._v(" "),e("div",{staticClass:"banner"},[e("swiper",{attrs:{options:t.swiperOption}},[t._l(t.navList,function(n,o){return e("swiper-slide",{key:"pages"+o},t._l(n,function(n,o){return e("div",{key:"sp"+o},[e("img",{attrs:{src:n.image_url}}),t._v(" "),e("h3",{on:{touchstart:function(e){return t.trunBusiness(n)}}},[t._v(t._s(n.title))])])}),0)}),t._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),t._v(" "),e("div",{staticClass:"shops"},[t._m(0),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:!t.onoffData,expression:"!onoffData",modifiers:{fullscreen:!0}}],staticClass:"content",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading"}},t._l(t.shopsList,function(n){return e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:n.image_path},on:{touchstart:function(e){return t.trunShops(n)}}})]),t._v(" "),e("div",{staticClass:"right"},[e("h4",[e("i",[t._v("品牌")]),t._v(" "),e("b",{on:{touchstart:function(e){return t.trunShops(n)}}},[t._v(t._s(n.name))]),t._v(" "),e("span",[t._v("票")]),t._v(" "),e("span",[t._v("准")]),t._v(" "),e("span",[t._v("保")])]),t._v(" "),e("p",[e("el-rate",{attrs:{id:"pf",disabled:""},model:{value:n.rating,callback:function(e){t.$set(n,"rating",e)},expression:"item.rating"}}),t._v("\n\t\t\t\t\t\t月售"+t._s(n.recent_order_num)+"单\n\t\t\t\t\t\t"),e("i",[t._v("准时达")]),t._v(" "),e("i",{style:{backgroundColor:"#"+n.delivery_mode.color,border:"1px solid #"+n.delivery_mode.color}},[t._v(t._s(n.delivery_mode.text))])],1),t._v(" "),e("p",[e("span",[t._v("￥"+t._s(n.float_minimum_order_amount)+"起送/"+t._s(n.piecewise_agent_fee.tips))]),t._v(" "),e("span",[t._v(t._s(n.distance)+"/"),e("b",[t._v(t._s(n.order_lead_time))])])])])])}),0),t._v(" "),e("div",{staticStyle:{height:"2rem","line-height":"2rem","text-align":"center"},on:{touchstart:t.start,touchend:t.end}},[t._v("\n\t\t\t上拉刷新数据\n\t\t")])]),t._v(" "),e("BottomNav")],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("h3",[n("span",{staticClass:"el-icon-s-shop"}),this._v("附近商家")])}]};var h=e("VU/8")(f,v,!1,function(t){e("fpqV")},null,null).exports;o.default.use(s.a);var g=new s.a({routes:[{path:"/take-out-food",name:"TakeOutFood",component:h},{path:"/search",name:"Search",component:Promise.all([e.e(0),e.e(2)]).then(e.bind(null,"dwST"))},{path:"/shops",name:"Shops",component:e.e(1).then(e.bind(null,"W/Au")),children:[{path:":id",component:e.e(1).then(e.bind(null,"W/Au"))}]},{path:"/order",name:"Order",component:e.e(6).then(e.bind(null,"SC19"))},{path:"/personal-center",name:"PersonalCenter",component:e.e(7).then(e.bind(null,"jVo7"))},{path:"/business",name:"Business",component:Promise.all([e.e(0),e.e(8)]).then(e.bind(null,"P7yT"))},{path:"/positioning",name:"Positioning",component:e.e(4).then(e.bind(null,"HAPC"))},{path:"/position-search",name:"positionSearch",component:Promise.all([e.e(0),e.e(3)]).then(e.bind(null,"ddPe"))},{path:"/info-shop",name:"InfoShop",component:e.e(5).then(e.bind(null,"evCl"))},{path:"*",redirect:"/take-out-food"}]}),_=(e("d8/S"),e("zL8q")),m=e.n(_),y=(e("tvR6"),e("v2ns"),e("b8UZ"));o.default.use(y.a);var b=new y.a.Store({state:{locationInfo:{pinyin:"",is_map:!0,longitude:null,latitude:null,sort:null,area_code:"",abbr:"",name:"",id:null},position:""},mutations:{changeLocationInfo:function(t,n){t.locationInfo={pinyin:"",is_map:!0,longitude:n.point.lng,latitude:n.point.lat,sort:null,area_code:"",abbr:"",name:n.addressComponents.city,id:null}},changeLocationInfo1:function(t,n){t.locationInfo=n},changeLocationInfo2:function(t,n){t.locationInfo=n}}});o.default.use(u.a),o.default.use(d.a),o.default.use(m.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:g,store:b,components:{App:a},template:"<App/>"})},cBse:function(t,n,e){"use strict";var o={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"bottom-nav"},[e("ul",[e("router-link",{attrs:{to:"/take-out-food",tag:"li"}},[e("i"),t._v(" "),e("span",[t._v("外卖")])]),t._v(" "),e("router-link",{attrs:{to:"/search",tag:"li"}},[e("i"),t._v(" "),e("span",[t._v("搜索")])]),t._v(" "),e("router-link",{attrs:{to:"/order",tag:"li"}},[e("i"),t._v(" "),e("span",[t._v("订单")])]),t._v(" "),e("router-link",{attrs:{to:"/personal-center",tag:"li"}},[e("i"),t._v(" "),e("span",[t._v("我的")])])],1)])},staticRenderFns:[]};var i=e("VU/8")({name:"BottomNav"},o,!1,function(t){e("kktO")},null,null);n.a=i.exports},"d8/S":function(t,n){},fpqV:function(t,n){},kktO:function(t,n){},"l/JR":function(t,n,e){"use strict";var o=e("//Fk"),i=e.n(o),a=e("I29D"),s=e.n(a);s.a.create={baseURL:"http://127.0.0.1:3000",timeout:2e3},s.a.interceptors.response.use(function(t){if(200==t.status)return t.data},function(t){return i.a.reject(t)}),s.a.interceptors.request.use(function(t){return t},function(t){return i.a.reject(t)});var r={post:function(t){return s.a.post(t)},get:function(t){return s.a.get(t)}},u="";n.a={index_entry:function(){return r.get(u+"/v2/index_entry")},restaurants:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/v4/restaurants?"+n)},getHotCity:function(){return r.get(u+"/v1/cities?type=hot")},getAllCity:function(){return r.get(u+"/v1/cities?type=all")},getSearchPosition:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/v1/posi?type=search&"+n)},getShopping:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/shopping/restaurants?"+n)},getRestaurantCategory:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/restaurant/category?"+n)},getDeliveryMods:function(){return r.get(u+"/shopping/v1/restaurants/delivery_mods")},getCategory:function(){return r.get(u+"/v2/restaurant/category")},getShoppingRestaurant:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/shopping/restaurant?"+n)},getMenu:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/v2/menu?"+n)},getRatingsScores:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/v2/restaurant/1/ratings/scores?"+n)},getRatingsTags:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/v2/restaurants/1/ratings/tags?"+n)},getUgcRatings:function(t){var n="";for(var e in t)n+=e+"="+t[e]+"&";return r.get(u+"/ugc/v2/restaurants/ratings?"+n)}}},sAuz:function(t,n){},tvR6:function(t,n){},v2ns:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.d90b95c0ba7355da452c.js.map